{
  "version": 3,
  "sources": ["../../../src/client-only.ts"],
  "sourcesContent": ["import {\n  Show,\n  createComponent,\n  createMemo,\n  createSignal,\n  lazy,\n  onMount,\n  sharedConfig,\n} from 'solid-js';\nimport type { Component, JSX } from 'solid-js';\nimport { isServer } from 'solid-js/web';\n\nexport const createClientSignal = isServer\n  ? (): (() => boolean) => () => true\n  : (): (() => boolean) => {\n      const [flag, setFlag] = createSignal(false);\n\n      onMount(() => {\n        setFlag(true);\n      });\n\n      return flag;\n    };\n\nexport interface ClientOnlyProps {\n  fallback?: JSX.Element;\n  children?: JSX.Element;\n}\n\nexport const ClientOnly = (props: ClientOnlyProps): JSX.Element => {\n  const isClient = createClientSignal();\n\n  return Show({\n    keyed: false,\n    get when() {\n      return isClient();\n    },\n    get fallback() {\n      return props.fallback;\n    },\n    get children() {\n      return props.children;\n    },\n  });\n};\n\nexport function clientOnly<T extends Component<any>>(\n  fn: () => Promise<{ default: T }>,\n): T {\n  const Lazy = lazy(fn);\n  return ((props: any) => {\n    if (sharedConfig.context) {\n      const [flag, setFlag] = createSignal(false);\n\n      onMount(() => {\n        setFlag(true);\n      });\n\n      return createMemo(() => {\n        if (flag()) {\n          return createComponent(Lazy, props);\n        }\n        return undefined;\n      });\n    }\n    return createComponent(Lazy, props);\n  }) as unknown as T;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAQO;AAEP,iBAAyB;AAElB,IAAM,qBAAqB,sBAC9B,MAAuB,MAAM,OAC7B,MAAuB;AACrB,QAAM,CAAC,MAAM,OAAO,QAAI,8BAAa,KAAK;AAE1C,+BAAQ,MAAM;AACZ,YAAQ,IAAI;AAAA,EACd,CAAC;AAED,SAAO;AACT;AAOG,IAAM,aAAa,CAAC,UAAwC;AACjE,QAAM,WAAW,mBAAmB;AAEpC,aAAO,sBAAK;AAAA,IACV,OAAO;AAAA,IACP,IAAI,OAAO;AACT,aAAO,SAAS;AAAA,IAClB;AAAA,IACA,IAAI,WAAW;AACb,aAAO,MAAM;AAAA,IACf;AAAA,IACA,IAAI,WAAW;AACb,aAAO,MAAM;AAAA,IACf;AAAA,EACF,CAAC;AACH;AAEO,SAAS,WACd,IACG;AACH,QAAM,WAAO,sBAAK,EAAE;AACpB,SAAQ,CAAC,UAAe;AACtB,QAAI,6BAAa,SAAS;AACxB,YAAM,CAAC,MAAM,OAAO,QAAI,8BAAa,KAAK;AAE1C,mCAAQ,MAAM;AACZ,gBAAQ,IAAI;AAAA,MACd,CAAC;AAED,iBAAO,4BAAW,MAAM;AACtB,YAAI,KAAK,GAAG;AACV,qBAAO,iCAAgB,MAAM,KAAK;AAAA,QACpC;AACA,eAAO;AAAA,MACT,CAAC;AAAA,IACH;AACA,eAAO,iCAAgB,MAAM,KAAK;AAAA,EACpC;AACF;",
  "names": []
}
